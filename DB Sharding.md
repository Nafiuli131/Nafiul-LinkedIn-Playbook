ЁЯЪА DB Sharding

ржЖржЬржХрзЗрж░ ржжрж┐ржирзЗ ржЖржкржирж┐ ржпрзЗ ржзрж░ржирзЗрж░ ржбрзЗржЯрж╛рж░ рж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░рзЗржи рждрж╛ ржжрзНрж░рзБрждржЧрждрж┐рждрзЗ ржмрзГржжрзНржзрж┐ ржкрж╛ржЪрзНржЫрзЗред Monolithic ржмрж╛ single database ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░рзЗ ржПржХржЯрж┐ рж╕ржоржпрж╝ ржкрж░ ржПржоржи ржкрж░рж┐рж╕рзНржерж┐рждрж┐ ржЖрж╕рзЗ ржпрзЗржЦрж╛ржирзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕ scalability ржЖрж░ maintain ржХрж░рж╛ рж╕ржорзНржнржм рж╣ржпрж╝ ржирж╛ред ржПржЦрж╛ржирзЗржЗ ржЖрж╕рзЗ Database Sharding ржПрж░ ржнрзВржорж┐ржХрж╛ред

ЁЯФО DB Sharding ржХрзА?

DB Sharding рж╣рж▓рзЛ ржПржХржЯрж┐ horizontal partitioning technique, ржпрзЗржЦрж╛ржирзЗ ржмржбрж╝ ржПржХржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕ржХрзЗ ржЫрзЛржЯ ржЫрзЛржЯ ржЕржВрж╢рзЗ (shards) ржнрж╛ржЧ ржХрж░рж╛ рж╣ржпрж╝ред ржкрзНрж░рждрж┐ржЯрж┐ shard ржЖрж╕рж▓рзЗ ржЖрж▓рж╛ржжрж╛ database instance, ржпрзЗржЦрж╛ржирзЗ ржбрзЗржЯрж╛рж░ subset рж╕ржВрж░ржХрзНрж╖рж┐ржд ржерж╛ржХрзЗред

ржЙржжрж╛рж╣рж░ржг:

ржзрж░рзБржи, ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ рззрзж ржХрзЛржЯрж┐ ржЗржЙржЬрж╛рж░рзЗрж░ ржбрзЗржЯрж╛ ржЖржЫрзЗред

ржПржХрж╕рж╛ржерзЗ рж╕ржм ржбрзЗржЯрж╛ ржПржХржЯрж┐ржорж╛рждрзНрж░ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ рж░рж╛ржЦрж▓рзЗ query ржЦрзБржм slow рж╣ржмрзЗред

Sharding ржХрж░рж▓рзЗ ржЖржкржирж┐ region ржмрж╛ userId ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржЖрж▓рж╛ржжрж╛ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржбрзЗржЯрж╛ ржнрж╛ржЧ ржХрж░рзЗ ржирж┐рждрзЗ ржкрж╛рж░ржмрзЗржиред

ЁЯСЙ ржпрзЗржоржи:

Shard 1 тЖТ UserId 1 ржерзЗржХрзЗ 10 рж▓рж╛ржЦ

Shard 2 тЖТ UserId 10 рж▓рж╛ржЦ ржерзЗржХрзЗ 20 рж▓рж╛ржЦ

Shard 3 тЖТ UserId 20 рж▓рж╛ржЦ ржерзЗржХрзЗ 30 рж▓рж╛ржЦ

тЪб Sharding ржПрж░ рж╕рзБржмрж┐ржзрж╛
тЬЕ Scalability тАУ ржбрзЗржЯрж╛ distributed рж╣ржУржпрж╝рж╛ржпрж╝ system рж╕рж╣ржЬрзЗ scale ржХрж░рж╛ ржпрж╛ржпрж╝ред
тЬЕ Performance тАУ ржЫрзЛржЯ subset ржП query ржЪрж▓рж╛ржпрж╝ response time ржЕржирзЗржХ ржжрзНрж░рзБржд рж╣ржпрж╝ред
тЬЕ Fault Isolation тАУ ржПржХ shard ржбрж╛ржЙржи рж╣рж▓рзЗржУ ржЕржирзНржп shard ржЪрж╛рж▓рзБ ржерж╛ржХрзЗред

тЪая╕П ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬрж╕ржорзВрж╣
рждржмрзЗ Sharding implement ржХрж░рж╛ рж╕рж╣ржЬ ржХрж╛ржЬ ржиржпрж╝:

Data distribution strategy ржарж┐ржХ ржХрж░рж╛ (range-based, hash-based, geo-based ржЗрждрзНржпрж╛ржжрж┐)

Cross-shard query manage ржХрж░рж╛

Resharding (ржбрзЗржЯрж╛ ржмрж╛ржбрж╝рж▓рзЗ shard ржкрзБржирж░рж╛ржпрж╝ ржнрж╛ржЧ ржХрж░рж╛)

ЁЯОп ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗ Sharding ржПрж░ ржмрзНржпржмрж╣рж╛рж░
Netflix, Amazon, Facebook ржПрж░ ржоржд ржмржбрж╝ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржоржЧрзБрж▓рзЛ ржХрзЛржЯрж┐ ржХрзЛржЯрж┐ ржЗржЙржЬрж╛рж░рзЗрж░ ржбрзЗржЯрж╛ ржорзНржпрж╛ржирзЗржЬ ржХрж░рждрзЗ DB Sharding ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред
Sharding ржЫрж╛ржбрж╝рж╛ ржПржд ржмржбрж╝ рж╕рзНржХрзЗрж▓рзЗ low latency ржПржмржВ high availability ржмржЬрж╛ржпрж╝ рж░рж╛ржЦрж╛ рж╕ржорзНржнржмржЗ рж╣рждрзЛ ржирж╛ред

ржЕрж░рзНржерж╛рзО, ржпржЦржиржЗ ржЖржкржирж╛рж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржбрзЗржЯрж╛рж░ ржкрж░рж┐ржорж╛ржг ржПржмржВ ржЗржЙржЬрж╛рж░рзЗрж░ рж▓рзЛржб ржжрзНрж░рзБржд ржмрж╛ржбрж╝рждрзЗ ржерж╛ржХрзЗ, рждржЦржи Sharding ржПржХржЯрж┐ game-changer solution рж╣рждрзЗ ржкрж╛рж░рзЗред
